{% extends "base.html" %}
{% block content %}
<h3 class="yellow-text text-shadow text-darken-4 center-align">Search Plant.ID Plants</h3>
    <div class="row col s12 card-panel teal lighten-4">
        <div class="col s3">
            <form action="{{ url_for('get_plant_id') }}" id="myform" enctype="multipart/form-data" method="POST">
                <input type="file" id="capture" name="file"/>
                <div class="row col s12">
                <img class="card center-align plant_image" src="" id="img" alt=""/>
                </div>    
                <button name="action" type="submit">Submit</button>
            </form>
        </div>
        <div class="">
        </div>
        <div class="row center-align">
            <img class="card plant_image" src="" id="img" alt=""/>
        </div>
        </div>
            <div class="row col s6 center-align card-panel teal lighten-4">
            <img class="card" src="{{ media }}" alt="No image"/>
        </div>
<ul class="">
    {% for suggestion in response['suggestions'] %}
    <li>
    <div class="card col s6">
      <div class="teal lighten-4">
		<div class="plant_id">
			<ul>
                <li><i class="fas fa-spa teal-text text-lighten-2"></i>
                <strong>Common Names: </strong>
                {% if suggestion["plant_details"]["common_names"] != None %}
                    {% for common_name in suggestion["plant_details"]["common_names"] %}
                        {{ common_name.title() }},
                    {% endfor %}
                {% else %}
                    None
                {% endif %}
                </li>
                <li><strong>Plant Name:</strong><em>{{ suggestion["plant_name"] }}</em></li>
                <li><strong>Similar Images:</strong>
                    <div class="row col s12">
                    <ul>
                        {% for similar in suggestion["similar_images"] %}
                        <div class="col s6 center-align">
                        <li>
                            <em>{{ '%0.2f'|format(similar.similarity|float*100) }}%</em><br>
                        </li>
                        <li>
                            <img class="card plant_image" src="{{ similar.url }}"> <br>
                        </li>
                        </div>
                        {% endfor %}
                    </ul>
                    </div>
                </li>
            </ul>
            <div class="row">
                <a class="hoverable teal-text text-darken-4 wiki-text" href="{{ suggestion['plant_details']['url'] }}" target="_blank">WIKI link to "{{ suggestion['plant_name'] }}"</a>
            </div>
            <div class="">
                <form action="{{url_for('search_trefle')}}" method="post">
                    <div class="valign-wrapper">
                        <div class="input-field">
                            <i class="fas fa-search prefix teal-text text-darken-4"></i>
                            <label for="query"></label>
                            <input style="font-style: italic;" type="text" name="query" id="query" value="{{ suggestion['plant_name'] }}">
                        </div>
                    </div>
                        <div>
                            <button type="submit" value="Submit" class="teal darken-1 btn text-shadow">
                            <i class="fas fa-search left"></i> Trefle Search
                            </button>
                        </div>
                    
                </form>
            </div>
        </div>
      </div>
    </div>
    </li>
    {% endfor %}
</ul>
{% endblock %}
{% block scripts %}
<script src="static/js/image_upload.js" type="text/javascript"></script>
{% endblock %}