{% extends 'base.html' %} {% block content %}

<div class="row col s12 card-panel teal lighten-4">
    <div class="col s9">
        <p>Upload your image file here to search plant suggestions:</p>
    </div>
    <div class="col s3">
        <button id="upload_widget" class="cloudinary-buttons">Upload Image</button>
    </div>
</div>

<div class="container teal lighten-4 teal-text text-darken-4">
<h4>My Images</h4>
<ul class="collapsible" data-collapsible="accordion">
    {% for image in images %}
    {% if session.user|lower == image.created_by|lower %}
    <li>
    <div class="collapsible-header teal lighten-4">
        <div class="col s9">
            <i class="fas fa-spa"></i>{{image.image_name}}
        </div>
        <div class="col s3">
            <i class="material-icons">expand_more</i>
        </div>
    </div>
    <div class="collapsible-body">
        <span><strong>Description: </strong></span><span> {{image.description}}</span> <br>
        <span><strong>Date Added: </strong></span><span> {{image.date_added}}</span> <br>
        <span><strong>Created By: </strong></span><span> {{image.created_by}}</span> <br>
        <div class="btn-css">
		    <a href="" class="waves-effect waves-light btn"><i class="material-icons"></i>Edit</a>
		    <a href="" class="waves-effect waves-light red darken-2 btn right"><i class="material-icons"></i>Delete</a>
        </div>
    </div>
    </li>
    {% endif %}
    {% endfor %}
</ul>
<div class="row">
        <div class="btn-css">
		    <a href="{{ url_for('upload_image') }}" class="waves-effect waves-light teal  darken-2 btn">Add Image   <i class="fas fa-edit"></i></a>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>  

<script type="text/javascript">  
var myWidget = cloudinary.createUploadWidget({
  cloudName: "rmc-ltd",
  uploadPreset: 'my_garden'}, (error, result) => { 
    if (!error && result && result.event === "success") { 
      console.log('Done! Here is the image info: ', result.info); 
    }
  }
)

document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
</script>
{% endblock %}